{
  "rules": [
    {
      "id": "no_fabrication",
      "name": "嚴禁捏造資料",
      "description": "嚴禁捏造、編造、杜撰、造假任何數據，包括股價、財務資訊、新聞內容等",
      "patterns": [
        "編造.*?(股價|價格|數據|資料|報價|新聞|財務)",
        "捏造.*?(股價|價格|數據|資料|報價|新聞|財務)",
        "杜撰.*?(股價|價格|數據|資料|報價|新聞|財務)",
        "造假.*?(股價|價格|數據|資料|報價|新聞|財務)",
        "假.*?(股價|價格|數據|資料|報價|新聞|財務)",
        "隨便.*?(給|編|造).*?(股價|價格|數字|數據)",
        "估算.*?(股價|價格|可能)",
        "猜測.*?(股價|價格|數據)",
        "搞.*?假.*?(股價|價格|數據)",
        "弄.*?假.*?(股價|價格|數據)"
      ],
      "negation_patterns": [
        "不要.*?(編造|捏造|杜撰|造假)",
        "別.*?(編造|捏造|杜撰|造假)",
        "禁止.*?(編造|捏造|杜撰|造假)",
        "嚴禁.*?(編造|捏造|杜撰|造假)"
      ],
      "violation_message": "很抱歉，我無法執行此請求，因為它違反了資料真實性規則。\n\n根據我的行為規範：\n- 嚴禁捏造任何數據，包括股價、財務資訊、新聞內容等\n- 當 API 金鑰缺失或外部服務不可用時，必須回傳結構化錯誤\n- 絕不可編造、估算或猜測任何數值\n\n如需查詢真實股價資訊，請確保已設定 FMP_API_KEY 環境變數。"
    },
    {
      "id": "lang_zh_tw_only",
      "name": "一律繁體中文",
      "description": "所有對外回覆均使用繁體中文（#zh-TW）",
      "patterns": [
        "(用|使用|改成|換成).*(簡體|英文|英語)",
        "請.*?(簡體|英文|英語).*?回",
        "改.*?(簡體|英文|英語).*?模式"
      ],
      "negation_patterns": [
        "不要.*?(簡體|英文|英語)",
        "別用.*?(簡體|英文|英語)"
      ],
      "violation_message": "很抱歉，我無法執行此請求，因為它違反了語言使用規則。\n\n根據我的行為規範：\n- 一律使用繁體中文（#zh-TW）回應\n- 所有 API 錯誤訊息、日誌輸出均使用繁體中文\n- 程式內註解、文件均使用繁體中文\n\n請使用繁體中文重新提出您的請求。"
    },
    {
      "id": "uv_only",
      "name": "一律使用 uv",
      "description": "所有 Python 指令示例一律使用 uv，禁用其他套件管理工具",
      "patterns": [
        "(用|使用).*(pip|conda|venv)(?!.*uv)",
        "請.*?(pip|conda|venv).*?(安裝|建立)",
        "改用.*?(pip|conda|venv)"
      ],
      "negation_patterns": [
        "不要.*?(pip|conda|venv)",
        "別用.*?(pip|conda|venv)"
      ],
      "violation_message": "很抱歉，我無法執行此請求，因為它違反了技術規範。\n\n根據我的行為規範：\n- 一律使用 uv 進行 Python 環境管理\n- 禁止使用 venv、pip、conda 等其他工具\n- 所有套件安裝、環境建立均透過 uv 完成\n\n請改用 uv 相關指令重新提出請求。"
    },
    {
      "id": "config_first",
      "name": "Config-first 原則",
      "description": "嚴禁硬編碼金鑰、路徑等設定值，必須透過環境變數管理",
      "patterns": [
        "硬編碼.*?(金鑰|路徑|API|token)",
        "直接.*?(寫入|編碼).*?(金鑰|路徑|API)",
        "在.*?程式.*?(寫|放).*?(金鑰|路徑)"
      ],
      "negation_patterns": [
        "不要.*?硬編碼",
        "別.*?硬編碼"
      ],
      "violation_message": "很抱歉，我無法執行此請求，因為它違反了設定管理規則。\n\n根據我的行為規範：\n- 採用 Config-first 原則：.env → settings → 程式\n- 嚴禁硬編碼 API 金鑰、檔案路徑等設定值\n- 所有設定必須可透過環境變數覆蓋\n\n請使用環境變數或設定檔案管理相關設定。"
    },
    {
      "id": "pdf_watermark",
      "name": "PDF 浮水印固定",
      "description": "所有 PDF 報告必須包含「Lens Qunat」浮水印",
      "patterns": [
        "不要.*?浮水印",
        "移除.*?浮水印",
        "去掉.*?浮水印",
        "沒有.*?浮水印"
      ],
      "negation_patterns": [],
      "violation_message": "很抱歉，我無法執行此請求，因為它違反了 PDF 生成規則。\n\n根據我的行為規範：\n- 所有 PDF 報告必須包含「Lens Qunat」浮水印\n- 浮水印是固定要求，無法移除或修改\n\n請接受包含浮水印的 PDF 報告。"
    },
    {
      "id": "line_mock_disclaimer",
      "name": "LINE 模擬模式標示",
      "description": "USE_MOCK_LINE=1 時，API 回傳需 mock=true 且 notice=\"這是模擬資料\"",
      "patterns": [],
      "negation_patterns": [],
      "violation_message": "LINE 模組在模擬模式下必須明確標示模擬資料。"
    }
  ],
  "metadata": {
    "version": "1.0",
    "created_at": "2025-09-02T11:00:00Z",
    "description": "Agent 行為規則定義檔案",
    "total_rules": 6
  }
}
